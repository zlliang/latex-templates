% ------------------------------------------------------------------
%     LaTeX Preamble -- Presentation Slides of Zilong Liang
% ------------------------------------------------------------------

% --- Flags --------------------------------------------------------
% \def\headlines{true}  % Uncomment if showing headlines
% \def\cn{true}  % Uncomment if the document is in Chinese
% \def\trans{true}  % Uncomment if creating transparencies
% \def\handout{true}  % Uncomment if creating handouts
% \def\withnotes{true}  % Uncomment if showing notes
% ------------------------------------------------------------------

% --- Document class -----------------------------------------------
\ifx\cn\undefined
  \documentclass[
    \ifdefined\trans{trans}\fi,
    \ifdefined\handout{handout}\fi,
  ]{beamer}
\else
  \documentclass[
    \ifdefined\trans{trans}\fi,
    \ifdefined\handout{handout}\fi,
  ]{ctexbeamer}
\fi
% ------------------------------------------------------------------

% --- Language specific settings -----------------------------------
\ifx\cn\undefined
  \def\outline{Outline}
  \usepackage{sansmathfonts,mathbbol}
  \renewcommand{\sfdefault}{cmss}
\else
  \def\outline{大纲}
  \usefonttheme{professionalfonts}
  \renewcommand{\CJKsfdefault}{方正悠黑简体 506L}
  \setCJKsansfont[
    BoldFont={方正悠黑简体 510M},
    BoldItalicFont={楷体-简 黑体},
    ItalicFont={楷体-简}
  ]{方正悠黑简体 506L}
\fi
% ------------------------------------------------------------------

% --- Packages -----------------------------------------------------
\usepackage{amsmath,amssymb,bm}  % AMS math symbols
\usepackage{cases,units}  % Cases and units for math
\usepackage{setspace}  % Line space
\usepackage{graphicx}  % Graphics
\usepackage{caption,subcaption}  % Caption 
\usepackage{tabularx,booktabs,threeparttable}  % Enhanced tabular
% \usepackage{algorithm,algorithmicx,algpseudocode}  % Pesudocode
% \usepackage{minted}  % Code
% \usepackage{tikz,pgfplots}  % TikZ and PGFPlots
% \usetikzlibrary{positioning}  % Relative position 
% \usetikzlibrary{cd}  % Change diagram
% \usetikzlibrary{backgrounds}  % Backgrounds
% \usetikzlibrary{fit}  % Fit
% \usetikzlibrary{intersections}  % Fit
% \pgfplotsset{compat=1.16}
% ------------------------------------------------------------------

% --- Beamer settings ----------------------------------------------
\useoutertheme{infolines}
\ifx\headlines\undefined
  \setbeamertemplate{headline}{}
\else
  \setbeamercolor*{subsection in head/foot}{
    parent=palette secondary
  }
\fi
\setbeamersize{text margin left=2.5em,text margin right=2.5em}
\usecolortheme[RGB={0,92,175}]{structure}
\usecolortheme{whale}\usecolortheme{orchid}
\setbeamertemplate{navigation symbols}{}
\ifdefined\mint \usemintedstyle{friendly} \fi  % Source code style
% --- Show table of contents at section beginnings
\AtBeginSection{
  \begin{frame}{\outline}
    \tableofcontents[currentsection]
  \end{frame}
}
% --- Notes and handouts settings
\ifdefined\withnotes
  \usepackage{pgfpages}
  \setbeameroption{show notes on second screen}
\fi
\mode<handout> {
  \usepackage{pgfpages}
  \usepackage[frame,noinfo]{crop}
  \pgfpagesuselayout{4 on 1}[a4paper,landscape]
  \pgfpageslogicalpageoptions{1}{
    scale=0.9,
    center=\pgfpoint{.28\pgfphysicalwidth}{.73\pgfphysicalheight}
  }
  \pgfpageslogicalpageoptions{2}{
    scale=0.9,
    center=\pgfpoint{.72\pgfphysicalwidth}{.73\pgfphysicalheight}
  }
  \pgfpageslogicalpageoptions{3}{
    scale=0.9,
    center=\pgfpoint{.28\pgfphysicalwidth}{.27\pgfphysicalheight}
  }
  \pgfpageslogicalpageoptions{4}{
    scale=0.9,
    center=\pgfpoint{.72\pgfphysicalwidth}{.27\pgfphysicalheight}
  }
}
% ------------------------------------------------------------------

% --- New math symbols ---------------------------------------------
\DeclareMathOperator{\diag}{diag}  % Diagonal matrix
\DeclareMathOperator{\tr}{tr}  % Trace
\DeclareMathOperator{\rank}{rank}  % Rank
\DeclareMathOperator{\Hess}{Hess}  % Hessian
\DeclareMathOperator{\Prob}{P}  % Probability
\DeclareMathOperator{\E}{E}  % Expectation
\DeclareMathOperator{\cov}{cov}  % Covariance
\DeclareMathOperator{\grad}{grad}  % Gradient
\DeclareMathOperator{\sgn}{sgn}  % Sign function
\DeclareMathOperator*{\argmax}{argmax}  % argmax
\DeclareMathOperator*{\argmin}{argmin}  % argmin
\def\l{\left}  % Left
\def\r{\right}  % Right
\def\t{\mathrm{T}}  % Transpose
\def\h{\mathrm{*}}  % Conjugate transpose
\def\abs#1{\l|{#1}\r|}  % Mod
\def\norm#1{\l\|{#1}\r\|}  % Norm
\def\numset{\mathbb}  % Number sets
\def\R{\numset{R}}  % Real number set
\def\C{\numset{C}}  % Complex number set
\def\conj{\overline}  % Conjugate
\def\e{\mathrm{e}}  % e
\def\i{\mathrm{i}}  % i
\def\d{\mathop{}\!\mathrm{d}}  % Differentiation
\def\pd{\mathop{}\!\partial}  % Partial diff
\def\hat#1{\widehat{#1}}  % Wide hat
\def\tilde#1{\widetilde{#1}}  % Wide tilde
\def\geq{\geqslant}  % Greater than
\def\leq{\leqslant}  % Less than
\def\qed{\hfill\ensuremath{\square}}  % End of proof
\def\st{\,\mathrm{s.t.}\,}  % "Such that" or "Subject to"
% ------------------------------------------------------------------

% --- Algorithm ----------------------------------------------------
\ifdefined\State
  \renewcommand{\algorithmicrequire}{\textbf{Input:}}
  \renewcommand{\algorithmicensure}{\textbf{Output:}}
\fi
% ------------------------------------------------------------------
