% ------------------------------------------------------------------
%     LaTeX Preamble -- Personal documents of Zilong Liang
% ------------------------------------------------------------------

% --- Flags --------------------------------------------------------
% \def\cn{true}  % Uncomment if the document is in Chinese
% \def\tx{true}  % Uncomment if the document uses the Times fonts
% ------------------------------------------------------------------

% --- Document class -----------------------------------------------
\ifx\cn\undefined
  \documentclass{article}
\else
  \documentclass{ctexart}
  \ifdefined\tx \def\defaultChineseFont{方正新书宋简体}
  \else \def\defaultChineseFont{方正书宋简体} \fi
  \renewcommand{\CJKrmdefault}{\defaultChineseFont}
  \renewcommand{\CJKttdefault}{方正仿宋简体}
  \setCJKmainfont[
    BoldFont={方正悠黑简体 509R},
    ItalicFont={楷体-简},
    BoldItalicFont={楷体-简 黑体}]
  {\defaultChineseFont}
  \setCJKmonofont{方正仿宋简体}
\fi
% ------------------------------------------------------------------

% --- Packages -----------------------------------------------------
\usepackage{geometry}  % Page layout
\usepackage{hyperref,cite}  % Complicated links and citations
\usepackage{xcolor,graphicx}  % Color and graphic
\usepackage{tabularx,booktabs}  % Enhanced tabular
\usepackage{caption,subcaption}  % Caption
\usepackage{enumitem}  % Better lists
\usepackage{amsmath,amssymb,mathtools}  % AMS math symbols and tools
\usepackage{cases,siunitx}  % Cases and units for math
\usepackage[amsmath,thmmarks]{ntheorem}  % Theorem environment
\ifdefined\tx \usepackage{newtxtext,newtxmath} \fi  % Times fonts
\usepackage{bm}  % Bold symbols
\usepackage{cleveref}  % Clever refs
\usepackage{microtype}  % Microtype
% \usepackage{algorithm,algorithmicx,algpseudocode}  % Pesudocode
% \usepackage{minted}  % Code
% \usepackage{tikz}  % TikZ
% \usepackage{pgfplots}\pgfplotsset{compat=1.16}  % PGFPlots
% ------------------------------------------------------------------

% --- Settings -----------------------------------------------------
% --- Color, geometry and hyperlink
\geometry{a4paper,centering,scale=0.75}
\setlist{nosep}
\definecolor{red}{RGB}{203,64,66}
\definecolor{blue}{RGB}{0,92,175}
\definecolor{green}{RGB}{0,137,108}
\definecolor{purple}{RGB}{168,73,122}
\ifdefined\cn \def\emph#1{\textbf{#1}} \fi
\def\red#1{\textcolor{red}{#1}}
\def\blue#1{\textcolor{blue}{#1}}
\def\green#1{\textcolor{green}{#1}}
\def\purple#1{\textcolor{purple}{#1}}
\hypersetup{
  bookmarksnumbered=true,
  pdfborder=0 0 0,
  colorlinks=true,
  linkcolor=blue,
  citecolor=green,
  urlcolor=purple,
}
% --- Page style
\pagestyle{plain}
\ifdefined\mint \usemintedstyle{friendly} \fi  % Source code style
% --- Bibliography format
\bibliographystyle{plain}
% --- Connect theorem environments with sections
% \numberwithin{equation}{section}
% \numberwithin{figure}{section}
% \numberwithin{table}{section}
% ------------------------------------------------------------------

% --- New math commands and environments ---------------------------
% --- Symbols
\DeclareMathOperator{\diag}{diag}  % Diagonal matrix
\DeclareMathOperator{\tr}{tr}  % Trace
\DeclareMathOperator{\rank}{rank}  % Rank
\DeclareMathOperator{\Hess}{Hess}  % Hessian
\DeclareMathOperator{\cov}{cov}  % Covariance
\DeclareMathOperator{\grad}{grad}  % Gradient
\DeclareMathOperator{\sgn}{sgn}  % Sign function
\DeclareMathOperator*{\argmax}{argmax}  % argmax
\DeclareMathOperator*{\argmin}{argmin}  % argmin
\def\P{\operatorname{P}}  % Probability
\def\E{\operatorname{E}}  % Expectation
\def\l{\left}  % Left
\def\r{\right}  % Right
\def\t{\mathrm{T}}  % Transpose
\def\h{\mathrm{*}}  % Conjugate transpose
\def\abs#1{\l|{#1}\r|}  % Mod
\def\norm#1{\l\|{#1}\r\|}  % Norm
\def\numset{\mathbb}  % Number sets
\def\R{\numset{R}}  % Real number set
\def\C{\numset{C}}  % Complex number set
\def\conj{\overline}  % Conjugate
\def\e{\mathrm{e}}  % e
\def\i{\mathrm{i}}  % i
\def\d{\mathop{}\!\mathrm{d}}  % Differentiation
\def\pd{\mathop{}\!\partial}  % Partial diff
\def\hat#1{\widehat{#1}}  % Wide hat
\def\tilde#1{\widetilde{#1}}  % Wide tilde
\def\geq{\geqslant}  % Greater than
\def\leq{\leqslant}  % Less than
\def\qed{\hfill\ensuremath{\square}}  % End of proof
\def\st{\,\mathrm{s.t.}\,}  % "Such that" or "Subject to"
% --- Theorem environments
\ifx\cn\undefined
  \newtheorem{definition}{Definition}  % Definition
  \newtheorem{theorem}{Theorem}  % Theorem
  \newtheorem{proposition}{Proposition}  % Proposition
  \newtheorem{corollary}{Corollary}  % Corollary
  \newtheorem{lemma}{Lemma}  % Lemma
  \newtheorem{example}{Example}  % Example
  {\theorembodyfont{\normalfont}\theoremstyle{nonumberplain}
  \theoremsymbol{\mbox{$\Box$}}\newtheorem{proof}{\textit{Proof.}}  % Proof
\else
  \newtheorem{definition}{定义}  % Definition
  \newtheorem{theorem}{定理}  % Theorem
  \newtheorem{proposition}{命题}  % Proposition
  \newtheorem{corollary}{推论}  % Corollary
  \newtheorem{lemma}{引理}  % Lemma
  \newtheorem{example}{例}  % Example
  {\theorembodyfont{\normalfont}\theoremstyle{nonumberplain}
  \theoremsymbol{\mbox{$\Box$}}\newtheorem{proof}{证明}  % Proof
\fi
% --- Algorithm
\ifdefined\State
  \ifx\cn\undefined
    \floatname{algorithm}{Algorithm}
  \else
    \floatname{algorithm}{算法}
  \fi
  \renewcommand{\algorithmicrequire}{\textbf{Input:}}
  \renewcommand{\algorithmicensure}{\textbf{Output:}}
\fi
% ------------------------------------------------------------------
